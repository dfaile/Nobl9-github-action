# Nobl9 Project Configuration
# Generated by Backstage Template: nobl9-project-template
# Project: ${{ values.projectName }}
# Created: ${{ now | date("2006-01-02 15:04:05") }}
# Users: {{ values.users | length }} users assigned

# =============================================================================
# Project Definition
# =============================================================================
---
apiVersion: n9/v1alpha
kind: Project
metadata:
  name: ${{ values.projectName }}
  displayName: ${{ values.displayName }}
  {% if values.description %}
  description: ${{ values.description }}
  {% endif %}
  labels:
    source: backstage-template
    generated-by: nobl9-backstage-action
    created-date: ${{ now | date("2006-01-02") }}
    template-version: "1.0.0"
    project-type: "monitoring"
spec:
  # Project specification (empty for basic projects)
  # Additional project configuration can be added here as needed

# =============================================================================
# Role Bindings
# =============================================================================
---
apiVersion: n9/v1alpha
kind: RoleBinding
metadata:
  name: ${{ values.projectName }}-role-bindings
  project: ${{ values.projectName }}
  displayName: "Role Bindings for ${{ values.displayName }}"
  labels:
    source: backstage-template
    generated-by: nobl9-backstage-action
    created-date: ${{ now | date("2006-01-02") }}
    template-version: "1.0.0"
spec:
  users:
    {% for user in values.users %}
    # User: ${{ user.email }} - Role: ${{ user.role }}
    - email: ${{ user.email }}
      roles:
        - ${{ user.role }}
    {% endfor %}

# =============================================================================
# Template Information
# =============================================================================
# This file was generated by the Nobl9 Backstage Template
# Template: nobl9-project-template
# Project: ${{ values.projectName }}
# Display Name: ${{ values.displayName }}
# Users Assigned: {{ values.users | length }}
# Generated: ${{ now | date("2006-01-02 15:04:05") }}
#
# The GitHub Action will process this file to:
# 1. Validate the YAML structure
# 2. Resolve email addresses to Okta User IDs
# 3. Create/update the project in Nobl9
# 4. Apply role bindings with resolved User IDs 